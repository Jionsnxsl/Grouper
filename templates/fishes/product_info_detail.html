{% extends "fishes/fish_admin.html" %}

{% block rightside-page-content %}
        <!-- Page wrapper  -->
        <div class="page-wrapper" id="rightside-page-wrapper">
            <!-- Bread crumb(右侧最上面的标题栏) -->
            <div class="row page-titles">
                <div class="col-md-5 align-self-center">
                    <h3 class="text-primary">产品信息详细</h3> </div>
                <div class="col-md-7 align-self-center">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="javascript:void(0)">主页</a></li>
                        <li class="breadcrumb-item active">产品信息查看</li>
                        <li class="breadcrumb-item active">产品信息详细</li>
                    </ol>
                </div>
            </div>
            <!-- End Bread crumb -->

            <!-- Container fluid  -->
            <div class="container-fluid">
                <!-- Start Page Content -->
                <div class="row">
                    <div class="col-12">
                        <div class="card card-outline-primary">
                            <div class="card-body">
                                <form action="#">
                                    <div class="form-body">
                                        <h3 class="card-title m-t-15"><strong>产品基本信息</strong></h3>
                                        <hr>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label class="control-label" for="product_batch"><strong>产品批次号 : </strong></label>
                                                    <span id="product_batch">{{ product_info_data.product_batch }}</span>
                                                </div>
                                            </div>
                                            <!--/span-->
                                            <div class="col-md-6">
                                                <div class="form-group has-danger">
                                                    <label class="control-label" for="product_date"><strong>产品生成时间 : </strong></label>
                                                    <span id="product_date">{{ product_info_data.product_date }}</span>
                                                </div>
                                            </div><!--/span-->
                                        </div>
                                        <div class="row">
                                            <div class="col-12">
                                                <div class="card">
                                                    <div class="card-body">
                                                        <h4 class="card-title">包装情景图片</h4>
                                                        <div class="file-loading">
                                                            <input id="pack_environment" name="pack_environment" type="file">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!--/row-->
                                        <h4 class="box-title m-t-40"><strong>石斑鱼基本信息</strong></h4>
                                        <hr>
                                        <div class="row">
                                            <div class="col-md-6 ">
                                                <div class="form-group">
                                                    <label for="fish_batch"><strong>石斑鱼批次:</strong></label>
                                                    <span id="fish_batch">{{ fish_info_data.fish_batch }}</span>
                                                </div>
                                            </div>
                                            <div class="col-md-6 ">
                                                <div class="form-group">
                                                    <label for="fish_batch"><strong>入料时间:</strong></label>
                                                    <span id="fish_batch">{{ fish_info_data.stock_date }}</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label for="fish_batch"><strong>石斑鱼数量:</strong></label>
                                                    <span id="fish_batch">{{ fish_info_data.number }}</span>
                                                </div>
                                            </div>
                                            <!--/span-->
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label for="fish_batch"><strong>石斑鱼总重量:</strong></label>
                                                    <span id="fish_batch">{{ fish_info_data.total_mass }}</span>
                                                </div>
                                            </div>
                                            <!--/span-->
                                        </div>
                                        <!--/row-->
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label for="fish_batch"><strong>石斑鱼品种名:</strong></label>
                                                    <span id="fish_batch">{{ fish_info_data.name }}</span>
                                                </div>
                                            </div>
                                            <!--/span-->
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label for="fish_batch"><strong>石斑鱼规格:</strong></label>
                                                    <span id="fish_batch">{{ fish_info_data.specification }}</span>
                                                </div>
                                            </div>
                                            <!--/span-->
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <label>入料检测报告</label>
                                                    <input id="name" type="text" class="form-control" >
                                                </div>
                                            </div>
                                            <!--/span-->
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                    <div class="form-group">
                                                        <label>第三方检测报告</label>
                                                        <input id="specification" type="text" class="form-control" >
                                                    </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                    <div class="form-group">
                                                        <label>入料情景图片</label>
                                                        <input id="specification" type="text" class="form-control" >
                                                    </div>
                                            </div>
                                        </div>

                                        <h4 class="box-title m-t-40"><strong>石斑鱼转移记录</strong></h4>
                                        <hr>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="card">
                                                    <div class="card-title">
                                                            <h4>转移记录表 </h4>
                                                    </div>
                                                    <div class="card-body">
                                                        <div class="table-responsive">
                                                            <table class="table table-bordered">
                                                                <thead>
                                                                    <tr>
                                                                        <th>#</th>
                                                                        <th>转移时间</th>
                                                                        <th>来源池</th>
                                                                        <th>目的池</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    {% for trans_info in trans_infos %}
                                                                        <tr>
                                                                            <th scope="row">{{ forloop.counter }}</th>
                                                                            <td>{{ trans_info.tans_date }}</td>
                                                                            <td> {{ trans_info.source_pool }} 号鱼池</td>
                                                                            <td> {{ trans_info.target_pool }} 号鱼池</td>
                                                                        </tr>
                                                                    {% endfor %}
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <h4 class="box-title m-t-40">石斑鱼加工信息</h4>
                                        <hr>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <label for="process_date"><strong>加工日期:</strong></label>
                                                    <span id="process_date">{{ process_info_data.process_date }}</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <label>加工情景</label>
                                                    <input id="process_date" type="text" class="form-control" >
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <label>领料情景</label>
                                                    <input id="get_scene" type="text" class="form-control" >
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <label>加工检测报告</label>
                                                    <input id="test_report_process" type="text" class="form-control" >
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="form-actions" style="margin-left: 30%">
                                        <button type="submit" class="btn btn-success">提交并生成二维码</button>
                                        <button type="button" class="btn btn-inverse">取消</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- End PAge Content -->
            </div>
            <!-- End Container fluid  -->
            <!-- footer -->
            <footer class="footer"> © 2018 All rights reserved.Designed by <a href="https://www.xmu.edu.cn/">XUM</a></footer>
            <!-- End footer -->
        </div>
        <!-- End Page wrapper  -->
{% endblock %}


{% block custom-scripts-for-each-page %}
    <script>
    $(function () {
            $("#pack_environment").fileinput({
                language: 'zh', //设置语言
                theme: 'fa',
                showUpload: true,
                dropZoneEnabled: false,
                browseClass: "btn btn-primary", //按钮样式
                allowedFileExtensions: ['jpg', 'png'],  //接收的文件后缀
                uploadUrl: "{% url 'fishes:productdetail'  %}", //上传的地址
                enctype:'multipart/form-data',
                previewFileType: "image",
                browseClass: "btn btn-success",
                //browseLabel: "Pick Image",
                browseIcon: "<i class=\"fa fa-picture-o\"></i> ",
                removeClass: "btn btn-danger",
                //removeLabel: "Delete",
                removeIcon: "<i class=\"fa fa-trash\"></i> ",
                uploadClass: "btn btn-info",
                //uploadLabel: "Upload",
                uploadIcon: "<i class=\"fa fa-upload\"></i> ",
                layoutTemplates: {
                    // actionDelete:'', //去除上传预览的缩略图中的删除图标
                    //actionUpload: '',//去除上传预览缩略图中的上传图片；
                    //actionZoom: ''   //去除上传预览缩略图中的查看详情预览的缩略图标
                },
                {% if imgs %}
                    overwriteInitial: true,
                    initialPreviewAsData: true,
                    initialPreview: [
                        "{{ imgs.img.url }}",  //用来请求图片的URL
                    ],
                    initialPreviewConfig: [
                        // url ： 用来删除的URL，去除的话删除按钮无效
                        {caption: "nature-1.jpg", size: 329892, width: "120px", url: "?delete-"+"{{ imgs.id }}", key: 1},
                    ]
                {% endif %}
            });

            // 上传错误
            $('#pack_environment').on('fileerror', function(event, data, msg) {
                console.log("ERROR");
            });

            // 上传成功
            $("#pack_environment").on("fileuploaded", function (event, data, previewId, index) {
                console.log("OK");
            });
        });
    </script>
{% endblock %}



